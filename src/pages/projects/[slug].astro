---
import Layout from '@/layouts/Layout.astro'
import {template} from '@/settings'
import {getCollection, render} from 'astro:content'

export async function getStaticPaths(): Promise<Array<{ params: { slug: string }, props: { post: any } }>> {
    const projectEntries = await getCollection("projects");

    const posts = projectEntries
        .map(post => {
        const slug = post.id
            return {
            params: { slug },
            props: { post },
            }
    })
    return posts
}
const {post} = Astro.props;
const { title, date, tags, link } = post.data; 
const { Content } = await render(post);
---

<Layout title={title}>
	<div class='max-w-4xl mx-auto'>
		<article
			class='prose max-w-none prose-headings:text-base-content prose-p:text-base-content/80'
		>
			<!-- Header section -->
			<div class='mb-8 border-b pb-8'>
				<div class="flex items-center justify-between mb-4">
					<h1 class='text-4xl font-bold text-base-content'>{title}</h1>
					<a href={link} target="_blank" rel="noopener noreferrer">
						<button class="btn btn-accent btn-sm rounded-full px-4 py-1 shadow hover:scale-105 transition-transform duration-150 flex items-center gap-2">
							<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="currentColor" viewBox="0 0 24 24">
								<path d="M12 2C6.477 2 2 6.484 2 12.012c0 4.418 2.867 8.166 6.839 9.489.5.092.682-.217.682-.483 0-.237-.009-.868-.014-1.703-2.782.605-3.369-1.342-3.369-1.342-.454-1.155-1.11-1.463-1.11-1.463-.908-.62.069-.608.069-.608 1.004.07 1.532 1.032 1.532 1.032.892 1.529 2.341 1.088 2.91.832.091-.646.35-1.088.636-1.339-2.221-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.254-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.025A9.564 9.564 0 0 1 12 6.844c.85.004 1.705.115 2.504.338 1.909-1.295 2.748-1.025 2.748-1.025.546 1.378.202 2.396.1 2.65.64.7 1.028 1.595 1.028 2.688 0 3.847-2.337 4.695-4.566 4.944.359.309.678.919.678 1.852 0 1.336-.012 2.417-.012 2.747 0 .268.18.579.688.481C19.135 20.175 22 16.427 22 12.012 22 6.484 17.523 2 12 2z"/>
							</svg>
						</button>
					</a>
				</div>
				<div class='flex flex-wrap items-center gap-4 text-base-content/70'>
					<!-- Date -->
					<time datetime={date} class='flex items-center'>
						<svg
							xmlns='http://www.w3.org/2000/svg'
							class='h-4 w-4 mr-2'
							fill='none'
							viewBox='0 0 24 24'
							stroke='currentColor'
						>
							<path
								stroke-linecap='round'
								stroke-linejoin='round'
								stroke-width='2'
								d='M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z'
							></path>
						</svg>
						{
							new Date(date).toLocaleDateString('en-US', {
								year: 'numeric',
								month: 'long',
								day: 'numeric',
							})
						}
					</time>

					<!-- Tags -->
					{
						tags && (
							<div class='flex flex-wrap gap-2'>
								{tags.map(tag => (
									<span class='badge badge-accent badge-outline'>{tag}</span>
								))}
							</div>
						)
					}
				</div>
			</div>

			<!-- Post content -->
			<div
				class='prose mt-8 prose-h2:text-2xl prose-h2:font-bold prose-h2:mb-4
         prose-h3:text-xl prose-h3:font-semibold prose-h3:mb-3
         prose-p:mb-4 prose-p:leading-relaxed
         prose-strong:text-base-content prose-strong:font-bold
         prose-em:italic
         prose-a:text-accent prose-a:no-underline hover:prose-a:underline
         prose-code:text-accent prose-code:bg-base-200 prose-code:px-1 prose-code:py-0.5 prose-code:rounded
         prose-blockquote:border-l-4 prose-blockquote:border-accent prose-blockquote:pl-4 prose-blockquote:italic
         prose-ul:list-disc prose-ul:pl-6
         prose-ol:list-decimal prose-ol:pl-6
         prose-li:mb-2
         prose-img:rounded-lg prose-img:my-8'
		style="display: flex; flex-direction: column; align-items: center;"
		></div>
                <Content />
			</div>
		</article>
	</div>
</Layout>
